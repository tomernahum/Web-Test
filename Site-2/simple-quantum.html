<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>Universe Splitter Online</title>
    

    <script defer>
        //practicing dom manipulation:   probably cleaner way to do the css (besides using a file) but I am tired
        function getMainDiv() {
            const mainDiv = document.createElement('div')

            //Title
            const heading = document.createElement('p')
                heading.textContent = "Quantum Splitter"
                heading.style.fontSize = "50px";
                heading.style.marginLeft = "10px"
            mainDiv.appendChild(heading)

            //button
            const button = document.createElement('button')
                button.classList.add('main-button')
                button.textContent = "SPLIT UNIVERSE"
                button.style.fontSize = "50px";
                button.style.width = "500px"
                button.style.height = "100px"
                
                //button.addEventListener("click", onButtonClick)
            mainDiv.appendChild(button)

            //output area
            const outputArea = document.createElement('p')
                outputArea.id = "output-area"
                outputArea.style.fontSize = "50px"
            mainDiv.appendChild(outputArea)
            
            return mainDiv
        }
        
        //main
        const mainDiv = getMainDiv()
        const outputArea = mainDiv.querySelector("#output-area")
        const mainButton = mainDiv.querySelector(".main-button")
        
        mainButton.addEventListener("click", onButtonClick)
        
        window.onload = () => {
            document.body.appendChild(mainDiv)
            mainDiv.append("Made by tomer") //who said you need a framework for syncing your data and your DOM?
        }


        function output(s)  {
            //alert(s)
            //outputArea.innerText = s

            outputArea.innerText += s + "\n"
        }

        function onButtonClick(e) {
            const universeNumber = splitUniverseFake()
            //const universeNumber = splitUniverseANUOld()
            
            console.log(universeNumber)
            //may be a better to do this with actuall error handling or whatever, I will look into that after I learn what errors whatever fetching thing I will use will throw. So this is a placeholder i guess
            if (universeNumber){
                output(`You are in Universe ${universeNumber}`)
            }
            else {
                output(`Failed to split the universe`)
            }
            
        }



        function splitUniverseFake() {
            return Math.floor((Math.random() * 2)) + 1;
        }

        function splitUniverseANUOld() {  //its called old cause there gonna deprecate the api and start charging for it
            
            //I dont know async / promises yet. Seems like I need those maybe (will need eventually so might as well learn)
            // but I am tired for the day and it seems like a whole donkey concept. or i can use xhttp as far as i saw from breif bad reasearch, but that also seems like something you have to learn
            
            //this is code I dont understand and I dont know how to get the data out of it lol
            fetch("https://qrng.anu.edu.au/API/jsonI.php?length=1&type=uint8")
            .then((response) => response.json())
            .then((anuData) => {
                const number = anuData.data["0"]   //returns number 0-255
                const universeNumber = number % 2
                console.log(universeNumber)
                return universeNumber
                
            });
        }

        



    </script>
    
    <style>
        * {
            margin: 3px;   
            /* This is the simplest version of this so I will keep the look 
            but I do want to modify the styling a little in the future to be more responsive on mobile */
        }
    </style>
</head>
<body>
</body>
</html>